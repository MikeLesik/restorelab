---
export interface Props {
  t: Record<string, any>;
  lang: string;
  compact?: boolean;
  exclude?: string[];
}

const { t, lang, compact = false, exclude = [] } = Astro.props;
const services = t.services.items.filter((s: any) => !exclude.includes(s.id));

const icons: Record<string, string> = {
  // Car — sedan side profile with windows and wheels
  car: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 11l2-5h10l2 5M3 11h18v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4z"/><circle cx="7.5" cy="17.5" r="1.5"/><circle cx="16.5" cy="17.5" r="1.5"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 11V8m6 3V8"/>`,
  // Glass — window with 4 panes
  glass: `<rect x="3" y="4" width="18" height="16" rx="2" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12h18M12 4v16"/>`,
  // Acrylic — cube
  acrylic: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>`,
  // Yacht — sailboat with mast, two sails, hull
  yacht: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v13M12 3L4 16h8zM12 7l6 9h-6zM2 20h20M6 20c0 1.5 2.5 2 6 2s6-.5 6-2"/>`,
};
---

<section class={compact ? '' : 'py-24'}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    {!compact && (
      <div class="text-center mb-16">
        <h2 class="section-title">{t.services.section_title}</h2>
        <p class="section-subtitle mx-auto">{t.services.section_subtitle}</p>
      </div>
    )}

    <div class:list={['grid gap-6', services.length === 3 ? 'grid-cols-1 md:grid-cols-3' : 'grid-cols-1 md:grid-cols-2']}>
      {services.map((service: any) => (
        <div class="card group hover:border-brand-accent/40 transition-all duration-300 hover:-translate-y-1">

          <div class="flex items-start justify-between mb-6">
            <div class="w-12 h-12 bg-brand-accent/10 rounded-xl flex items-center justify-center group-hover:bg-brand-accent/20 transition-colors">
              <svg class="w-6 h-6 text-brand-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24" set:html={icons[service.icon]} />
            </div>
            {service.tag && (
              <span class="tag bg-brand-gold/10 text-brand-gold border border-brand-gold/20">
                {service.tag}
              </span>
            )}
          </div>

          <h3 class="text-xl font-display font-bold text-white mb-1">{service.title}</h3>
          <p class="text-white/50 text-sm mb-4">{service.subtitle}</p>

          {service.starting_price && (
            <div class="flex items-center gap-3 mb-6 pb-4 border-b border-white/10">
              <span class="text-brand-accent font-bold text-lg">{service.starting_price}</span>
              {service.vs_price && (
                <span class="text-white/30 text-xs">{service.vs_price}</span>
              )}
            </div>
          )}

          <ul class="space-y-2 mb-8">
            {service.features.map((f: string) => (
              <li class="flex items-center gap-3 text-sm text-white/70">
                <svg class="w-4 h-4 text-brand-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7" />
                </svg>
                {f}
              </li>
            ))}
          </ul>

          <div class="flex gap-3">
            <a
              href={`/${lang}/services/${service.id}`}
              class="flex-1 text-center py-2.5 px-4 border border-white/15 hover:border-brand-accent/40 text-white text-sm font-medium rounded-lg transition-colors"
            >
              {t.services.learn_more}
            </a>
            <a
              href={`/${lang}/contact`}
              class="flex-1 text-center py-2.5 px-4 bg-brand-accent hover:bg-blue-500 text-white text-sm font-medium rounded-lg transition-colors"
            >
              {t.services.get_quote}
            </a>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
