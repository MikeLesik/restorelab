---
import BaseLayout from '@/layouts/BaseLayout.astro';
import PricingCards from '@/components/PricingCards.astro';
import LeadForm from '@/components/LeadForm.astro';
import FAQ from '@/components/FAQ.astro';

import en from '@/content/en.json';
import es from '@/content/es.json';
import pt from '@/content/pt.json';

export function getStaticPaths() {
  return [
    { params: { lang: 'en' }, props: { t: en } },
    { params: { lang: 'es' }, props: { t: es } },
    { params: { lang: 'pt' }, props: { t: pt } },
  ];
}

const { lang } = Astro.params;
const { t } = Astro.props;
const service = t.services.items.find((s: any) => s.id === 'glass-polishing');
const wa = import.meta.env.PUBLIC_WHATSAPP_NUMBER || '351933817788';
const waUrl = `https://wa.me/${wa}?text=Hello+RestoreLab!+I'm+interested+in+Glass+Polishing.`;
---

<BaseLayout
  title={t.meta.glass.title}
  description={t.meta.glass.description}
  lang={lang}
  t={t}
  currentPath="/services/glass-polishing"
>
  <div class="pt-24">
    <section class="relative py-14 sm:py-16 overflow-hidden bg-gradient-hero">
      <div class="absolute inset-0 opacity-10" style="background-image: linear-gradient(rgba(42,127,255,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(42,127,255,0.3) 1px, transparent 1px); background-size: 60px 60px;"></div>

      <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
          <div>
            <a href={`/${lang}/services`} class="inline-flex items-center gap-2 text-sm text-white/40 hover:text-white mb-8 transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
              </svg>
              {t.nav.services}
            </a>

            <h1 class="text-4xl md:text-5xl font-display font-bold text-white mb-6 leading-tight">
              {service?.title}
            </h1>
            <p class="text-xl text-white/60 mb-8">{service?.subtitle}</p>

            <ul class="space-y-3 mb-10">
              {service?.features.map((f: string) => (
                <li class="flex items-center gap-3 text-white/80">
                  <svg class="w-5 h-5 text-brand-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7" />
                  </svg>
                  {f}
                </li>
              ))}
            </ul>

            <div class="flex gap-4">
              <a href={waUrl} target="_blank" rel="noopener noreferrer" class="btn-whatsapp">{t.services.get_quote}</a>
              <a href={`/${lang}/pricing`} class="btn-secondary">{t.nav.pricing}</a>
            </div>
          </div>

          <div class="relative aspect-square max-w-md rounded-3xl overflow-hidden border border-white/10">
            <img
              src="/images/services/glass-polish.jpg"
              alt="Glass scratch removal result"
              class="w-full h-full object-cover"
              width="800"
              height="450"
              loading="eager"
              decoding="async"
            />
          </div>
        </div>
      </div>
    </section>

    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Service",
      "serviceType": "Glass Scratch Removal",
      "provider": { "@type": "LocalBusiness", "name": "RestoreLab" },
      "areaServed": ["Lisboa", "Cascais", "Sintra", "Oeiras"],
      "description": t.meta.glass.description
    })} />

    <PricingCards t={t} lang={lang} categoryId="glass" />
    <FAQ t={t} />
    <LeadForm t={t} lang={lang} />
  </div>
</BaseLayout>
